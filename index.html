<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Kinect and Processing</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section id="themes">
					<h2>Themes</h2>
					<p>
						<!-- Hacks to swap themes after the page has loaded. Not flexible and only intended for the reveal.js demo deck. -->
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/black.css'); return false;">Black (default)</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/white.css'); return false;">White</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/league.css'); return false;">League</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/sky.css'); return false;">Sky</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/beige.css'); return false;">Beige</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/simple.css'); return false;">Simple</a> <br>
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/serif.css'); return false;">Serif</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/blood.css'); return false;">Blood</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/night.css'); return false;">Night</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/moon.css'); return false;">Moon</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/solarized.css'); return false;">Solarized</a>
					</p>
				</section>

				<section>
					<h1>KINECT AND PROCESSING</h1>
					<p>
						<small>Created by <a href="https://chala8.github.io" target=”_blank”>Daniel Chala</a> / <a href="https://dacherreragu.github.io/" target=”_blank”>David Herrera</a></small>
					</p>
				</section>

				<section>
					<h2>INDEX</h2>
					<ol>
						<li class="fragment"><a href="#/3">Minority report photos</a></li>
					</ol>
				</section>

				<section>
					<section>
						<h1>MINORITY REPORT PHOTOS</h1>
					</section>
					<section>
						<h2>MINORITY REPORT PHOTOS</h2>
						<img src="images/1.jpg">
					</section>
					<section>
						<h2>OVERVIEW</h2>
						<p>In the 2002 sci-fi movie Minority Report (based on a Philip K. Dick short story),
							Tom Cruise played a “pre crime” policeman who uses the predictions of psychics to
							anticipate and prevent violent crimes. Cruise accesses these predictions as a series
							of images on a projected screen that he navigates with gestures. He drags his hands to
							pull in new images, spreads them apart to zoom in on a telling detail, pinches to zoom out to the big picture.</p>
					</section>
					<section>
						<h2>BASIC VERSION: ONE IMAGE</h2>
						<p>We need to give the user the ability to “drop” the image, to stop it moving by clicking the mouse.</p>
					</section>
					<section>
						<section data-markdown>
							## CODE
							```
							import SimpleOpenNI.*;
							SimpleOpenNI kinect;

							int closestValue;
							int closestX;
							int closestY;

							float lastX;
							float lastY;

							// declare x-y coordinates for the image
							float image1X;
							float image1Y;

							// declare a boolean to store whether or not the image is moving
							boolean imageMoving;

							// declare a variable
							// to store the image
							PImage image1; //1)

							void setup()
							{
								size(640, 480);
								kinect = new SimpleOpenNI(this);
								kinect.enableDepth();

								// start the image out moving
								// so mouse press will drop it
								imageMoving = true;

								// load the image from a file
								image1 = loadImage("image1.jpg");

								background(0);
							}

							void draw()
							{
								closestValue = 8000;

								kinect.update();

								int[] depthValues = kinect.depthMap();

								for(int y = 0; y < 480; y++){
									for(int x = 0; x < 640; x++){
										int reversedX = 640-x-1;
										int i = reversedX + y * 640;
										int currentDepthValue = depthValues[i];

										if(currentDepthValue > 610
										&& currentDepthValue < 1525
										&& currentDepthValue < closestValue) //2)
										{
											closestValue = currentDepthValue;
											closestX = x;
											closestY = y;
										}
									}
								}

								float interpolatedX = lerp(lastX, closestX, 0.3);
								float interpolatedY = lerp(lastY, closestY, 0.3);

								// clear the previous drawing
								background(0); //3)

								// only update image position
								// if image is in moving state
								if(imageMoving){
									image1X = interpolatedX;
									image1Y = interpolatedY;
								}

								//draw the image on the screen
								image(image1,image1X,image1Y);

								lastX = interpolatedX;
								lastY = interpolatedY;
							}

							void mousePressed(){
								// if the image is moving, drop it
								// if the image is dropped, pick it up
								imageMoving = !imageMoving;
							}
							```
						</section>
						<section>
							<h2>EXECUTE</h2>
							<p>Once you’ve added your image, run the sketch and you should see
								your image floating around the screen, following your outstretched hand.</p>
						</section>
						<section>
							<h2>1) HOW DOES THIS SKETCH WORK?</h2>
							<ul>
								<li>Declaring and loading an image</li>
								<li class="fragment"> image1X and image1Y, which will hold the position
									of our image and a Boolean called imageMoving, which will keep
									track of whether or not the user has “dropped” the image.</li>
								<li class="fragment">If image-Moving is true, clicking the mouse
									will set it to false, and vice versa. That way the mouse button
									will act to drop the image if the user is currently moving it
									around and to start it moving around again if it’s dropped.</li>
							</ul>
						</section>
						<section>
							<h2>2) AFTER INTERPOLATE</h2>
							<ul>
								<li>If our imageMoving variable is true, we update our image’s x-y
									coordinates based on interpolatedX and interpolatedY.</li>
								<li class="fragment">We draw the image using those coordinates whether
									or not it is currently being moved.</li>
								<li class="fragment">If the image is being moved, image1X and image1Y
									will always be set to the most recent values of interpolatedX and interpolatedY.</li>
								<li class="fragment"> When you click the mouse and set imageMoving to false,
									image1X and image1Y will stop updating from the interpolated coordinates.
									However, we’ll still go ahead and draw the image using the most recent
									values of image1X and image1Y.</li>
							</ul>
						</section>
						<section>
							<h2>3) CLEAR THE WHOLE SKETCH TO BLACK</h2>
							<li>If we didn’t do that, we’d end up seeing trails of our image as we moved it around.</li>
							<li class="fragment">Processing always just draws on top of whatever is already there.</li>
							<li class="fragment">f we don’t clear our sketch to black, we’ll end up constantly displaying
								the image on top of old copies of itself in slightly different positions.</li>
						</section>
						<section>
							<h2>CLEAR THE WHOLE SKETCH TO BLACK</h2>
							<img src="images/1.jpg">
						</section>
					</section>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
